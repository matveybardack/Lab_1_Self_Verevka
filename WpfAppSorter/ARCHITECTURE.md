# Архитектура приложения "Сортировщик массивов"

## Обзор

Приложение построено с использованием принципов объектно-ориентированного программирования (ООП) и разделения ответственности. Логика приложения вынесена в отдельную библиотеку классов, а интерфейс взаимодействует с ней через сервисы.

## Структура проекта

```
WpfAppSorter/
├── Interfaces/           # Интерфейсы для взаимодействия с библиотекой
│   ├── IArrayManagerService.cs
│   ├── IArraySorterService.cs
│   └── IFileManagerService.cs
├── Models/              # Модели данных
│   └── ArrayDataTypes.cs
├── Services/            # Сервисы (реализации интерфейсов)
│   ├── ArrayManagerService.cs
│   ├── ArraySorterService.cs
│   └── FileManagerService.cs
├── MainWindow.xaml      # UI интерфейс
└── MainWindow.xaml.cs   # Код-behind (только обработка UI событий)

ClassLibrarySorter/      # Библиотека классов
├── ArraySorter.cs       # Алгоритмы сортировки
└── DirectoryViewer.cs   # Работа с файлами
```

## Принципы архитектуры

### 1. Разделение ответственности (Separation of Concerns)
- **UI слой**: Только обработка пользовательского интерфейса
- **Сервисный слой**: Бизнес-логика и координация
- **Библиотека классов**: Чистая логика алгоритмов и работы с данными

### 2. Инверсия зависимостей (Dependency Inversion)
- MainWindow зависит от интерфейсов, а не от конкретных реализаций
- Сервисы реализуют интерфейсы и используют библиотеку классов

### 3. Единственная ответственность (Single Responsibility Principle)
- `ArraySorter` - только алгоритмы сортировки
- `DirectoryViewer` - только работа с файлами
- `ArrayManagerService` - только управление массивом
- `FileManagerService` - только управление файлами

## Компоненты системы

### Интерфейсы (Interfaces)

#### IArrayManagerService
- Управление массивом (добавление, удаление, очистка)
- Контроль состояния инициализации
- Парсинг элементов по типу данных

#### IArraySorterService
- Алгоритмы сортировки (пузырьковая, выбором, вставками, быстрая)
- Сравнение объектов

#### IFileManagerService
- Сохранение и загрузка массивов
- Управление списком отслеживаемых файлов

### Модели данных (Models)

#### ArrayDataTypes
- Перечисление типов данных (Integer, Float, DateTime)
- Вспомогательные методы для работы с типами
- Парсинг значений

### Сервисы (Services)

#### ArrayManagerService
- Реализует `IArrayManagerService`
- Управляет состоянием массива
- Контролирует блокировку UI элементов

#### ArraySorterService
- Реализует `IArraySorterService`
- Делегирует вызовы к `ArraySorter` из библиотеки классов

#### FileManagerService
- Реализует `IFileManagerService`
- Делегирует вызовы к `DirectoryViewer` из библиотеки классов

### Библиотека классов (ClassLibrarySorter)

#### ArraySorter
- Чистые алгоритмы сортировки без зависимостей от UI
- Методы: BubbleSort, SelectionSort, InsertionSort, QuickSort
- Универсальное сравнение объектов

#### DirectoryViewer
- Работа с файловой системой
- Сохранение и загрузка массивов
- Отслеживание файлов

## Поток данных

1. **Пользователь** взаимодействует с UI (MainWindow.xaml)
2. **UI события** обрабатываются в MainWindow.xaml.cs
3. **Сервисы** координируют бизнес-логику
4. **Библиотека классов** выполняет чистые вычисления
5. **Результаты** возвращаются через сервисы в UI

## Преимущества архитектуры

### 1. Тестируемость
- Каждый компонент можно тестировать изолированно
- Легко создавать моки для интерфейсов

### 2. Расширяемость
- Легко добавить новые алгоритмы сортировки
- Простое добавление новых типов данных
- Возможность заменить реализацию сервисов

### 3. Поддерживаемость
- Четкое разделение ответственности
- Минимальные зависимости между компонентами
- Легко понимать и модифицировать код

### 4. Переиспользование
- Библиотека классов может использоваться в других проектах
- Сервисы можно переиспользовать в других UI

## Примеры использования

### Добавление нового алгоритма сортировки
1. Добавить метод в `ArraySorter` (библиотека классов)
2. Добавить метод в `IArraySorterService` (интерфейс)
3. Реализовать метод в `ArraySorterService` (сервис)
4. Добавить UI элемент в MainWindow.xaml
5. Обработать событие в MainWindow.xaml.cs

### Добавление нового типа данных
1. Добавить значение в `ArrayDataType` (модель)
2. Обновить методы в `ArrayDataTypes` (модель)
3. Добавить парсинг в `DirectoryViewer` (библиотека классов)
4. Добавить UI элемент для выбора типа данных

## Заключение

Данная архитектура обеспечивает:
- Четкое разделение ответственности
- Легкость тестирования и поддержки
- Возможность расширения функциональности
- Переиспользование компонентов
- Соответствие принципам SOLID
